<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="一位在校大学生的学习笔记">
<meta name="keywords" content="叼">
<meta property="og:type" content="website">
<meta property="og:title" content="CycloneKid的个人博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="CycloneKid的个人博客">
<meta property="og:description" content="一位在校大学生的学习笔记">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CycloneKid的个人博客">
<meta name="twitter:description" content="一位在校大学生的学习笔记">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>CycloneKid的个人博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">CycloneKid的个人博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">学习内容总结</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/schedule/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br />
            
            日程表
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            站点地图
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/13/设计模式-02-创建型模式详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CycloneKid">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/myimg/1.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CycloneKid的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/13/设计模式-02-创建型模式详解/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-13T14:42:40+08:00">
                2018-04-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>根据系列博客的第一篇<a href="http://blog.csdn.net/eagleuniversityeye/article/details/78909570" target="_blank" rel="noopener">设计模式-01-设计模式简介及分类</a>对24设计模式的分类，本文对第一类—–创建型模式，进行举例分析</p>
<p>##一.工厂模式<br>修正了简单工厂模式中不遵守开放－封闭原则。工厂方法模式把选择判断移到了客户端去实现，如果想添加新功能就不用修改原来的类，直接修改客户端即可</p>
<p><img src="http://img.blog.csdn.net/20180228231609834?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>####代码举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">//实例基类，相当于Product(为了方便，没用抽象)</span><br><span class="line">class LeiFeng</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void Sweep()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;雷锋扫地&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//学雷锋的大学生，相当于ConcreteProduct</span><br><span class="line">class Student: public LeiFeng</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void Sweep()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;大学生扫地&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//学雷锋的志愿者，相当于ConcreteProduct</span><br><span class="line">class Volenter: public LeiFeng</span><br><span class="line">&#123;</span><br><span class="line">public :</span><br><span class="line">	virtual void Sweep()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;志愿者&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">//工场基类Creator</span><br><span class="line">class LeiFengFactory</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual LeiFeng* CreateLeiFeng()</span><br><span class="line">	&#123;</span><br><span class="line">		return new LeiFeng();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">//工场具体类</span><br><span class="line">class StudentFactory : public LeiFengFactory</span><br><span class="line">&#123;</span><br><span class="line">public :</span><br><span class="line">	virtual LeiFeng* CreateLeiFeng()</span><br><span class="line">	&#123;</span><br><span class="line">		return new Student();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">class VolenterFactory : public LeiFengFactory</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual LeiFeng* CreateLeiFeng()</span><br><span class="line">	&#123;</span><br><span class="line">		return new Volenter();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">//客户端</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	LeiFengFactory *sf=new LeiFengFactory();</span><br><span class="line">	LeiFeng *s=sf-&gt;CreateLeiFeng();</span><br><span class="line">	s-&gt;Sweep();</span><br><span class="line">	delete s;</span><br><span class="line">	delete sf;</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##二.抽象工厂模式<br>定义了一个创建一系列相关或相互依赖的接口，而无需指定它们的具体类。<br>用于交换产品系列，如ACCESS-&gt;SQL SERVER；产品的具体类名被具体工厂的实现分离</p>
<p><img src="http://img.blog.csdn.net/20180228231440499?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>####代码举例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">//用户抽象接口</span><br><span class="line">class IUser</span><br><span class="line">&#123;</span><br><span class="line">public :</span><br><span class="line">	virtual void GetUser()=0;</span><br><span class="line">	virtual void InsertUser()=0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//部门抽象接口</span><br><span class="line">class IDepartment</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void GetDepartment()=0;</span><br><span class="line">	virtual void InsertDepartment()=0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//ACCESS用户</span><br><span class="line">class CAccessUser : public IUser</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void GetUser()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;Access GetUser&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void InsertUser()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;Access InsertUser&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//ACCESS部门</span><br><span class="line">class CAccessDepartment : public IDepartment</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void GetDepartment()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;Access GetDepartment&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void InsertDepartment()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;Access InsertDepartment&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//SQL用户</span><br><span class="line">class CSqlUser : public IUser</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void GetUser()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;Sql User&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void InsertUser()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;Sql User&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//SQL部门类</span><br><span class="line">class CSqlDepartment: public IDepartment</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void GetDepartment()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;sql getDepartment&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void InsertDepartment()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;sql insertdepartment&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//抽象工厂</span><br><span class="line">class IFactory</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual IUser* CreateUser()=0;</span><br><span class="line">	virtual IDepartment* CreateDepartment()=0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//ACCESS工厂</span><br><span class="line">class AccessFactory : public IFactory</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual IUser* CreateUser()</span><br><span class="line">	&#123;</span><br><span class="line">		return new  CAccessUser();</span><br><span class="line">	&#125;</span><br><span class="line">	virtual IDepartment* CreateDepartment()</span><br><span class="line">	&#123;</span><br><span class="line">		return new CAccessDepartment();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//SQL工厂</span><br><span class="line">class SqlFactory : public IFactory</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual IUser* CreateUser()</span><br><span class="line">	&#123;</span><br><span class="line">		return new  CSqlUser();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	virtual IDepartment* CreateDepartment()</span><br><span class="line">	&#123;</span><br><span class="line">		return new CSqlDepartment();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">客户端：</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	IFactory* factory= new SqlFactory();</span><br><span class="line">	IUser* user=factory-&gt;CreateUser();</span><br><span class="line">	IDepartment* depart = factory-&gt;CreateDepartment();</span><br><span class="line">	user-&gt;GetUser();</span><br><span class="line">	depart-&gt;GetDepartment();</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>##三.单例模式<br>保证一个类仅有一个实例，并提供一个访问它的全局访问点</p>
<p><img src="http://img.blog.csdn.net/20180228232001253?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>####代码举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Singelton</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">	Singelton()&#123;&#125;</span><br><span class="line">	static Singelton* singel;</span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">	static Singelton* GetInstance()</span><br><span class="line">	&#123;</span><br><span class="line">		if(singel == NULL)</span><br><span class="line">		&#123;</span><br><span class="line">			singel = new Singelton();</span><br><span class="line">		&#125;</span><br><span class="line">		return singel;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line">Singelton* Singelton::singel = NULL;//注意静态变量类外初始化</span><br><span class="line"></span><br><span class="line">客户端：</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	Singelton* s1=Singelton::GetInstance();</span><br><span class="line">	Singelton* s2=Singelton::GetInstance();</span><br><span class="line">	if(s1 == s2)</span><br><span class="line">		cout&lt;&lt;&quot;ok&quot;&lt;&lt;endl;</span><br><span class="line">	else</span><br><span class="line">		cout&lt;&lt;&quot;no&quot;&lt;&lt;endl;</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##四.建造者模式<br>在当创建复杂对象的算法应该独立于该对象的组成部分以及它们的装配方式时适用。</p>
<p><img src="http://img.blog.csdn.net/20180228231217464?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>####代码举例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">//例一</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">//最终的产品类</span><br><span class="line">class Product </span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">	vector&lt;string&gt; m_product;</span><br><span class="line">public:</span><br><span class="line">	void Add(string strtemp)</span><br><span class="line">	&#123;</span><br><span class="line">		m_product.push_back(strtemp);</span><br><span class="line">	&#125;</span><br><span class="line">	void Show()</span><br><span class="line">	&#123;</span><br><span class="line">		vector&lt;string&gt;::iterator p=m_product.begin();</span><br><span class="line">		while (p!=m_product.end())</span><br><span class="line">		&#123;</span><br><span class="line">			cout&lt;&lt;*p&lt;&lt;endl;</span><br><span class="line">			p++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//建造者基类</span><br><span class="line">class Builder</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void BuilderA()=0;</span><br><span class="line">	virtual void BuilderB()=0;</span><br><span class="line">	virtual Product* GetResult()=0;</span><br><span class="line">&#125;;</span><br><span class="line">//第一种建造方式</span><br><span class="line">class ConcreteBuilder1 : public Builder</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">	Product* m_product;</span><br><span class="line">public:</span><br><span class="line">	ConcreteBuilder1()</span><br><span class="line">	&#123;</span><br><span class="line">		m_product=new Product();</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void BuilderA()</span><br><span class="line">	&#123;</span><br><span class="line">		m_product-&gt;Add(&quot;one&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void BuilderB()</span><br><span class="line">	&#123;</span><br><span class="line">		m_product-&gt;Add(&quot;two&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">	virtual Product* GetResult()</span><br><span class="line">	&#123;</span><br><span class="line">		return m_product;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">//第二种建造方式</span><br><span class="line">class ConcreteBuilder2 : public Builder</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">	Product * m_product;</span><br><span class="line">public:</span><br><span class="line">	ConcreteBuilder2()</span><br><span class="line">	&#123;</span><br><span class="line">		m_product=new Product();</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void BuilderA()</span><br><span class="line">	&#123;</span><br><span class="line">		m_product-&gt;Add(&quot;A&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void BuilderB()</span><br><span class="line">	&#123;</span><br><span class="line">		m_product-&gt;Add(&quot;B&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">	virtual Product* GetResult()</span><br><span class="line">	&#123;</span><br><span class="line">		return m_product;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//指挥者类</span><br><span class="line">class Direct</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	void Construct(Builder* temp)</span><br><span class="line">	&#123;</span><br><span class="line">		temp-&gt;BuilderA();</span><br><span class="line">		temp-&gt;BuilderB();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//客户端</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	Direct *p=new Direct();</span><br><span class="line">	Builder* b1=new ConcreteBuilder1();</span><br><span class="line">	Builder* b2=new ConcreteBuilder2();</span><br><span class="line"></span><br><span class="line">	p-&gt;Construct(b1);　　　　　//调用第一种方式</span><br><span class="line">	Product* pb1=b1-&gt;GetResult();</span><br><span class="line">	pb1-&gt;Show();</span><br><span class="line"></span><br><span class="line">	p-&gt;Construct(b2);          //调用第二种方式</span><br><span class="line">	Product * pb2=b2-&gt;GetResult();</span><br><span class="line">	pb2-&gt;Show();</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">//例二</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Person</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void CreateHead()=0;</span><br><span class="line">	virtual void CreateHand()=0;</span><br><span class="line">	virtual void CreateBody()=0;</span><br><span class="line">	virtual void CreateFoot()=0;</span><br><span class="line">&#125;;</span><br><span class="line">class ThinPerson : public Person</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void CreateHead()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;thin head&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void CreateHand()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;thin hand&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void CreateBody()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;thin body&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void CreateFoot()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;thin foot&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class ThickPerson : public Person</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void CreateHead()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;ThickPerson head&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void CreateHand()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;ThickPerson hand&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void CreateBody()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;ThickPerson body&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void CreateFoot()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;ThickPerson foot&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">//指挥者类</span><br><span class="line">class Direct</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">	Person* p;</span><br><span class="line">public:</span><br><span class="line">	Direct(Person* temp) &#123; p = temp;&#125;</span><br><span class="line">	void Create()</span><br><span class="line">	&#123;</span><br><span class="line">		p-&gt;CreateHead();</span><br><span class="line">		p-&gt;CreateBody();</span><br><span class="line">		p-&gt;CreateHand();</span><br><span class="line">		p-&gt;CreateFoot();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//客户端代码：</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    Person *p=new ThickPerson();</span><br><span class="line">	Direct *d= new Direct(p);</span><br><span class="line">	d-&gt;Create();</span><br><span class="line">	delete d;</span><br><span class="line">	delete p;</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##五.原型模式<br>从一个对象再创建另外一个可定制的对象，而无需知道任何创建的细节。并能提高创建的性能。 说白了就COPY技术，把一个对象完整的COPY出一份。</p>
<p><img src="http://img.blog.csdn.net/20180228232145198?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>####代码举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Prototype //抽象基类 </span><br><span class="line">&#123; </span><br><span class="line">private:</span><br><span class="line">	string m_strName;</span><br><span class="line">public: </span><br><span class="line">	Prototype(string strName)&#123; m_strName = strName; &#125;</span><br><span class="line">	Prototype() &#123; m_strName = &quot; &quot;; &#125;</span><br><span class="line">	void Show() </span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;m_strName&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	virtual Prototype* Clone() = 0 ; </span><br><span class="line">&#125; ; </span><br><span class="line"></span><br><span class="line">// class ConcretePrototype1 </span><br><span class="line">class ConcretePrototype1 : public Prototype </span><br><span class="line">&#123; </span><br><span class="line">public: </span><br><span class="line">	ConcretePrototype1(string strName) : Prototype(strName)&#123;&#125;</span><br><span class="line">	ConcretePrototype1()&#123;&#125;</span><br><span class="line"></span><br><span class="line">	virtual Prototype* Clone() </span><br><span class="line">	&#123; </span><br><span class="line">		ConcretePrototype1 *p = new ConcretePrototype1() ; </span><br><span class="line">		*p = *this ; //复制对象 </span><br><span class="line">		return p ; </span><br><span class="line">	&#125; </span><br><span class="line">&#125; ; </span><br><span class="line"></span><br><span class="line">// class ConcretePrototype2 </span><br><span class="line">class ConcretePrototype2 : public Prototype </span><br><span class="line">&#123; </span><br><span class="line">public: </span><br><span class="line">	ConcretePrototype2(string strName) : Prototype(strName)&#123;&#125;</span><br><span class="line">	ConcretePrototype2()&#123;&#125;</span><br><span class="line"></span><br><span class="line">	virtual Prototype* Clone() </span><br><span class="line">	&#123; </span><br><span class="line">		ConcretePrototype2 *p = new ConcretePrototype2() ; </span><br><span class="line">		*p = *this ; //复制对象 </span><br><span class="line">		return p ; </span><br><span class="line">	&#125; </span><br><span class="line">&#125; ; </span><br><span class="line"></span><br><span class="line">//客户端</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	ConcretePrototype1* test = new ConcretePrototype1(&quot;小王&quot;);</span><br><span class="line">	ConcretePrototype2* test2 = (ConcretePrototype2*)test-&gt;Clone();</span><br><span class="line">	test-&gt;Show();</span><br><span class="line">	test2-&gt;Show();</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/13/设计模式-03-结构型模式详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CycloneKid">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/myimg/1.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CycloneKid的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/13/设计模式-03-结构型模式详解/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-13T14:42:33+08:00">
                2018-04-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>承接上一篇博客<a href="http://blog.csdn.net/eagleuniversityeye/article/details/79406961#t1" target="_blank" rel="noopener">设计模式-02-创建型模式详解</a>，本篇讨论结构型模式的相关内容</p>
<p>##一.适配器模式<br>双方都不适合修改的时候，可以考虑使用适配器模式</p>
<p><img src="http://img.blog.csdn.net/20180228232653548?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>####代码举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">//例一</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Target</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void Request()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;普通的请求&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Adaptee</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	void SpecificalRequest()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;特殊请求&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Adapter :public  Target</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">	Adaptee* ada;</span><br><span class="line">public:</span><br><span class="line">	virtual void Request()</span><br><span class="line">	&#123;</span><br><span class="line">		ada-&gt;SpecificalRequest();</span><br><span class="line">		Target::Request();</span><br><span class="line">	&#125;</span><br><span class="line">	Adapter()</span><br><span class="line">	&#123;</span><br><span class="line">		ada=new Adaptee();</span><br><span class="line">	&#125;</span><br><span class="line">	~Adapter()</span><br><span class="line">	&#123;</span><br><span class="line">		delete ada;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//客户端：</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	Adapter * ada=new Adapter();</span><br><span class="line">	ada-&gt;Request();</span><br><span class="line">	delete ada;</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">//例二</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Player</span><br><span class="line">&#123;</span><br><span class="line">protected:</span><br><span class="line">	string name;</span><br><span class="line">public:</span><br><span class="line">	Player(string strName) &#123; name = strName; &#125;</span><br><span class="line">	virtual void Attack()=0;</span><br><span class="line">	virtual void Defense()=0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Forwards : public Player</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	Forwards(string strName):Player(strName)&#123;&#125;</span><br><span class="line">public:</span><br><span class="line">	virtual void Attack()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;name&lt;&lt;&quot;前锋进攻&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void Defense()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;name&lt;&lt;&quot;前锋防守&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Center : public Player</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	Center(string strName):Player(strName)&#123;&#125;</span><br><span class="line">public:</span><br><span class="line">	virtual void Attack()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;name&lt;&lt;&quot;中场进攻&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void Defense()</span><br><span class="line">	&#123;</span><br><span class="line">	    cout&lt;&lt;name&lt;&lt;&quot;中场防守&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//为中场翻译</span><br><span class="line">class TransLater: public Player</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">	Center *player;</span><br><span class="line">public:</span><br><span class="line">	TransLater(string strName):Player(strName)</span><br><span class="line">	&#123;</span><br><span class="line">		player = new Center(strName);</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void Attack()</span><br><span class="line">	&#123;</span><br><span class="line">		player-&gt;Attack();</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void Defense()</span><br><span class="line">	&#123;</span><br><span class="line">		player-&gt;Defense();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//客户端</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	Player *p=new TransLater(&quot;小李&quot;);</span><br><span class="line">	p-&gt;Attack();</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##二.桥接模式<br>将抽象部分与实现部分分离，使它们可以独立变化。<br>这里说的意思不是让抽象基类与具体类分离，而是现实系统可能有多角度分类，每一种分类都有可能变化，那么把这种多角度分离出来让它们独立变化，减少它们之间的耦合性，即如果继承不能实现“开放－封闭原则”的话，就应该考虑用桥接模式。</p>
<p><img src="http://img.blog.csdn.net/20180228232843649?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>####代码举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">//手机软件</span><br><span class="line">class HandsetSoft</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void Run()=0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//游戏软件</span><br><span class="line">class HandsetGame : public HandsetSoft</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void Run()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;运行手机游戏&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//通讯录软件</span><br><span class="line">class HandSetAddressList : public HandsetSoft</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void Run()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;手机通讯录&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//手机品牌</span><br><span class="line">class HandsetBrand</span><br><span class="line">&#123;</span><br><span class="line">protected:</span><br><span class="line">	HandsetSoft* m_soft;</span><br><span class="line">public:</span><br><span class="line">	void SetHandsetSoft(HandsetSoft* temp)</span><br><span class="line">	&#123;</span><br><span class="line">		m_soft = temp;</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void Run()=0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//M品牌</span><br><span class="line">class HandsetBrandM : public HandsetBrand</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void Run()</span><br><span class="line">	&#123;</span><br><span class="line">		m_soft-&gt;Run();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//N品牌</span><br><span class="line">class HandsetBrandN : public HandsetBrand</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void Run()</span><br><span class="line">	&#123;</span><br><span class="line">		m_soft-&gt;Run();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//客户端</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	HandsetBrand *brand;</span><br><span class="line">	brand = new HandsetBrandM();</span><br><span class="line">	brand-&gt;SetHandsetSoft(new HandsetGame());</span><br><span class="line">	brand-&gt;Run();</span><br><span class="line">	brand-&gt;SetHandsetSoft(new HandSetAddressList());</span><br><span class="line">	brand-&gt;Run();</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##三.组合模式<br>整体和部分可以被一致对待（如WORD中复制一个文字、一段文字、一篇文章都是一样的操作）</p>
<p><img src="http://img.blog.csdn.net/20180301121121843?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>####代码举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Component</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	string m_strName;</span><br><span class="line">	Component(string strName)</span><br><span class="line">	&#123;</span><br><span class="line">		m_strName = strName;</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void Add(Component* com)=0;</span><br><span class="line">	virtual void Display(int nDepth)=0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Leaf : public Component</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	Leaf(string strName): Component(strName)&#123;&#125;</span><br><span class="line"></span><br><span class="line">	virtual void Add(Component* com)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;leaf can&apos;t add&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	virtual void Display(int nDepth)</span><br><span class="line">	&#123;</span><br><span class="line">		string strtemp;</span><br><span class="line">		for(int i=0; i &lt; nDepth; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			strtemp+=&quot;-&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">		strtemp += m_strName;</span><br><span class="line">		cout&lt;&lt;strtemp&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Composite : public Component</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">	vector&lt;Component*&gt; m_component;</span><br><span class="line">public:</span><br><span class="line">	Composite(string strName) : Component(strName)&#123;&#125;</span><br><span class="line"></span><br><span class="line">	virtual void Add(Component* com)</span><br><span class="line">	&#123;</span><br><span class="line">		m_component.push_back(com);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	virtual void Display(int nDepth)</span><br><span class="line">	&#123;</span><br><span class="line">		string strtemp;</span><br><span class="line">		for(int i=0; i &lt; nDepth; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			strtemp+=&quot;-&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">		strtemp += m_strName;</span><br><span class="line">		cout&lt;&lt;strtemp&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line">		vector&lt;Component*&gt;::iterator p=m_component.begin();</span><br><span class="line">		while (p!=m_component.end())</span><br><span class="line">		&#123;</span><br><span class="line">			(*p)-&gt;Display(nDepth+2); </span><br><span class="line">			p++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//客户端</span><br><span class="line">#include &quot;Model.h&quot;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	Composite* p=new Composite(&quot;小王&quot;);</span><br><span class="line">	p-&gt;Add(new Leaf(&quot;小李&quot;));</span><br><span class="line">	p-&gt;Add(new Leaf(&quot;小赵&quot;));</span><br><span class="line"></span><br><span class="line">	Composite* p1 = new Composite(&quot;小小五&quot;);</span><br><span class="line">	p1-&gt;Add(new Leaf(&quot;大三&quot;));</span><br><span class="line"></span><br><span class="line">	p-&gt;Add(p1);</span><br><span class="line">	p-&gt;Display(1);</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##四.装饰器模式<br>动态地给一个对象添加一些额外的职责（不重要的功能，只是偶然一次要执行），就增加功能来说，装饰模式比生成子类更为灵活。建造过程不稳定，按正确的顺序串联起来进行控制。<br>当你向旧的类中添加新代码时，一般是为了添加核心职责或主要行为。而当需要加入的仅仅是一些特定情况下才会执行的特定的功能时（简单点就是不是核心应用的功能），就会增加类的复杂度。装饰模式就是把要添加的附加功能分别放在单独的类中，并让这个类包含它要装饰的对象，当需要执行时，客户端就可以有选择地、按顺序地使用装饰功能包装对象。</p>
<p><img src="http://img.blog.csdn.net/20180301121258444?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>####代码举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">//人</span><br><span class="line">class Person</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">	string m_strName;</span><br><span class="line">public:</span><br><span class="line">	Person(string strName)</span><br><span class="line">	&#123;</span><br><span class="line">		m_strName=strName;</span><br><span class="line">	&#125;</span><br><span class="line">	Person()&#123;&#125;</span><br><span class="line">	virtual void Show()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;装扮的是:&quot;&lt;&lt;m_strName&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line">//装饰类</span><br><span class="line">class Finery :public Person</span><br><span class="line">&#123;</span><br><span class="line">protected:</span><br><span class="line">	Person* m_component;</span><br><span class="line">public:</span><br><span class="line">	void Decorate(Person* component)</span><br><span class="line">	&#123;</span><br><span class="line">		m_component=component;</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void Show()</span><br><span class="line">	&#123;</span><br><span class="line">		   m_component-&gt;Show();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">//T恤</span><br><span class="line">class TShirts: public Finery</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void Show()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;T Shirts&quot;&lt;&lt;endl;</span><br><span class="line">		m_component-&gt;Show();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">//裤子</span><br><span class="line">class BigTrouser :public  Finery</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void Show()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot; Big Trouser&quot;&lt;&lt;endl;</span><br><span class="line">		m_component-&gt;Show();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//客户端</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	Person *p=new Person(&quot;小李&quot;);</span><br><span class="line">	BigTrouser *bt=new BigTrouser();</span><br><span class="line">	TShirts *ts=new TShirts();</span><br><span class="line"></span><br><span class="line">	bt-&gt;Decorate(p);</span><br><span class="line">	ts-&gt;Decorate(bt);</span><br><span class="line">	ts-&gt;Show();</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##五.外观模式<br>为子系统的一组接口提供一个一致的界面。使用户使用起来更加方便。</p>
<p><img src="http://img.blog.csdn.net/20180301121354175?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>####代码举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class SubSysOne</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	void MethodOne()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;方法一&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class SubSysTwo</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	void MethodTwo()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;方法二&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class SubSysThree</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	void MethodThree()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;方法三&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//外观类</span><br><span class="line">class Facade</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">	SubSysOne* sub1;</span><br><span class="line">	SubSysTwo* sub2;</span><br><span class="line">	SubSysThree* sub3;</span><br><span class="line">public:</span><br><span class="line">	Facade()</span><br><span class="line">	&#123;</span><br><span class="line">		sub1 = new SubSysOne();</span><br><span class="line">		sub2 = new SubSysTwo();</span><br><span class="line">		sub3 = new SubSysThree();</span><br><span class="line">	&#125;</span><br><span class="line">	~Facade()</span><br><span class="line">	&#123;</span><br><span class="line">		delete sub1;</span><br><span class="line">		delete sub2;</span><br><span class="line">		delete sub3;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	void FacadeMethod()</span><br><span class="line">	&#123;</span><br><span class="line">		sub1-&gt;MethodOne();</span><br><span class="line">		sub2-&gt;MethodTwo();</span><br><span class="line">		sub3-&gt;MethodThree();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//客户端</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	Facade* test = new Facade();</span><br><span class="line">	test-&gt;FacadeMethod();</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##六.享元模式<br>运用共享技术有效地支持大量细粒度的对象（对于C++来说就是共用一个内存块啦，对象指针指向同一个地方）。<br>如果一个应用程序使用了大量的对象，而这些对象造成了很大的存储开销就应该考虑使用。<br>还有就是对象的大多数状态可以外部状态，如果删除对象的外部状态，那么可以用较少的共享对象取代多组对象，此时可以考虑使用享元。</p>
<p><img src="http://img.blog.csdn.net/20180301121456744?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>####代码举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">//抽象的网站</span><br><span class="line">class WebSite</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void Use()=0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//具体的共享网站</span><br><span class="line">class ConcreteWebSite : public WebSite</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">	string name;</span><br><span class="line">public:</span><br><span class="line">	ConcreteWebSite(string strName)</span><br><span class="line">	&#123;</span><br><span class="line">		name = strName;</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void Use()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;网站分类：&quot;&lt;&lt;name&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//不共享的网站</span><br><span class="line">class UnShareWebSite : public WebSite</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">	string name;</span><br><span class="line">public:</span><br><span class="line">	UnShareWebSite(string strName)</span><br><span class="line">	&#123;</span><br><span class="line">		name = strName;</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void Use()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;不共享的网站：&quot;&lt;&lt;name&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//网站工厂类，用于存放共享的WebSite对象</span><br><span class="line">class WebFactory</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">	vector&lt;WebSite*&gt; websites;</span><br><span class="line">public:</span><br><span class="line">	WebSite* GetWeb()</span><br><span class="line">	&#123;</span><br><span class="line">		vector&lt;WebSite*&gt;::iterator p = websites.begin();</span><br><span class="line">		return *p;</span><br><span class="line">	&#125;</span><br><span class="line">	WebFactory()</span><br><span class="line">	&#123;</span><br><span class="line">		websites.push_back(new ConcreteWebSite(&quot;测试&quot;));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//客户端</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	WebFactory* f= new WebFactory();</span><br><span class="line">	WebSite* ws= f-&gt;GetWeb();</span><br><span class="line">	ws-&gt;Use();</span><br><span class="line"></span><br><span class="line">	WebSite* ws2 = f-&gt;GetWeb();</span><br><span class="line">	ws2-&gt;Use();</span><br><span class="line"></span><br><span class="line">	//不共享的类</span><br><span class="line">	WebSite* ws3 = new UnShareWebSite(&quot;测试&quot;);</span><br><span class="line">	ws3-&gt;Use();</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##七.代理模式<br>远程代理：可以隐藏一个对象在不同地址空间的事实<br>虚拟代理：通过代理来存放需要很长时间实例化的对象<br>安全代理：用来控制真实对象的访问权限<br>智能引用：当调用真实对象时，代理处理另外一些事</p>
<p><img src="http://img.blog.csdn.net/20180228232843649?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>####代码举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">//定义接口</span><br><span class="line">class Interface</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void Request()=0;</span><br><span class="line">&#125;;</span><br><span class="line">//真实类</span><br><span class="line">class RealClass : public Interface</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void Request()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;真实的请求&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">//代理类</span><br><span class="line">class ProxyClass : public Interface</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">	RealClass* m_realClass;</span><br><span class="line">public:</span><br><span class="line">	virtual void Request()</span><br><span class="line">	&#123;</span><br><span class="line">	    m_realClass= new RealClass();</span><br><span class="line">		m_realClass-&gt;Request();</span><br><span class="line">		delete m_realClass;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">客户端：</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	ProxyClass* test=new ProxyClass();</span><br><span class="line">	test-&gt;Request();</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/13/设计模式-04-行为型模式详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CycloneKid">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/myimg/1.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CycloneKid的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/13/设计模式-04-行为型模式详解/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-13T14:42:24+08:00">
                2018-04-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>承接上一篇博客<a href="http://blog.csdn.net/eagleuniversityeye/article/details/79406999" target="_blank" rel="noopener">设计模式-03-结构型模式详解</a>，本篇讨论结构型模式的相关内容</p>
<p>##一.责任链模式<br>使多个对象都有机会处理请求，从而避免请求的发送者和接收者之间的耦合关系。将这个对象连成一条链，并沿着这条链传递该请求，直到有一个对象处理为止。</p>
<p><img src="http://img.blog.csdn.net/20180228233215653?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>####代码举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">//请求</span><br><span class="line">class Request</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	string m_strContent;</span><br><span class="line">	int m_nNumber;</span><br><span class="line">&#125;;</span><br><span class="line">//管理者</span><br><span class="line">class Manager</span><br><span class="line">&#123;</span><br><span class="line">protected:</span><br><span class="line">	Manager* manager;</span><br><span class="line">	string name;</span><br><span class="line">public:</span><br><span class="line">	Manager(string temp)</span><br><span class="line">	&#123;</span><br><span class="line">		name = temp;</span><br><span class="line">	&#125;</span><br><span class="line">	void SetSuccessor(Manager* temp)</span><br><span class="line">	&#123;</span><br><span class="line">		manager = temp; </span><br><span class="line">	&#125;</span><br><span class="line">	virtual void GetRequest(Request* request) = 0;</span><br><span class="line">&#125;;</span><br><span class="line">//经理</span><br><span class="line">class CommonManager : public Manager</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	CommonManager(string strTemp) : Manager(strTemp)&#123;&#125;</span><br><span class="line">	virtual void GetRequest(Request* request)</span><br><span class="line">	&#123;</span><br><span class="line">		if ( request-&gt;m_nNumber&gt;=0 &amp;&amp; request-&gt;m_nNumber&lt;10 )</span><br><span class="line">		&#123;</span><br><span class="line">			cout&lt;&lt;name&lt;&lt;&quot;处理了&quot;&lt;&lt;request-&gt;m_nNumber&lt;&lt;&quot;个请求&quot;&lt;&lt;endl;</span><br><span class="line">		&#125;</span><br><span class="line">		else</span><br><span class="line">		&#123;</span><br><span class="line">			manager-&gt;GetRequest(request);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">//总监</span><br><span class="line">class MajorDomo : public Manager</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	MajorDomo(string name) : Manager(name)&#123;&#125;</span><br><span class="line"></span><br><span class="line">	virtual void GetRequest(Request* request)</span><br><span class="line">	&#123;</span><br><span class="line">		if(request-&gt;m_nNumber&gt;=10)</span><br><span class="line">		&#123;</span><br><span class="line">	    	cout&lt;&lt;name&lt;&lt;&quot;处理了&quot;&lt;&lt;request-&gt;m_nNumber&lt;&lt;&quot;个请求&quot;&lt;&lt;endl;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//客户端</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	Manager * common = new CommonManager(&quot;张经理&quot;);</span><br><span class="line">	Manager * major = new MajorDomo(&quot;李总监&quot;);</span><br><span class="line">	</span><br><span class="line">	common-&gt;SetSuccessor(major);</span><br><span class="line">	</span><br><span class="line">	Request* req = new Request();</span><br><span class="line">	req-&gt;m_nNumber = 33;</span><br><span class="line">	common-&gt;GetRequest(req);</span><br><span class="line">	</span><br><span class="line">	req-&gt;m_nNumber = 3;</span><br><span class="line">	common-&gt;GetRequest(req);</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##二.命令模式<br>一、建立命令队列；二、可以将命令记入日志；三、接收请求的一方可以拒绝；四、添加一个新命令类不影响其它类；<br>命令模式把请求一个操作的对象与知道怎么操行一个操作的对象分开</p>
<p><img src="http://img.blog.csdn.net/20180228233413052?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><img src="http://img.blog.csdn.net/20180228233421517?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>####代码举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">//烤肉师傅</span><br><span class="line">class Barbucer</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	void MakeMutton()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;烤羊肉&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	void MakeChickenWing()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;烤鸡翅膀&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//抽象命令类</span><br><span class="line">class Command</span><br><span class="line">&#123;</span><br><span class="line">protected:</span><br><span class="line">	Barbucer* receiver;</span><br><span class="line">public:</span><br><span class="line">	Command(Barbucer* temp)</span><br><span class="line">	&#123;</span><br><span class="line">		receiver = temp;</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void ExecuteCmd()=0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//烤羊肉命令</span><br><span class="line">class BakeMuttonCmd : public Command</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	BakeMuttonCmd(Barbucer* temp) : Command(temp)&#123;&#125;</span><br><span class="line">	virtual void ExecuteCmd()</span><br><span class="line">	&#123;</span><br><span class="line">		receiver-&gt;MakeMutton();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//烤鸡翅</span><br><span class="line">class ChickenWingCmd : public Command</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	ChickenWingCmd(Barbucer* temp) : Command(temp)&#123;&#125;</span><br><span class="line"></span><br><span class="line">	virtual void ExecuteCmd()</span><br><span class="line">	&#123;</span><br><span class="line">		receiver-&gt;MakeChickenWing();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//服务员类</span><br><span class="line">class Waiter</span><br><span class="line">&#123;</span><br><span class="line">protected:</span><br><span class="line">	vector&lt;Command*&gt; m_commandList;</span><br><span class="line">public:</span><br><span class="line">	void SetCmd(Command* temp)</span><br><span class="line">	&#123;</span><br><span class="line">		m_commandList.push_back(temp);</span><br><span class="line">		cout&lt;&lt;&quot;增加定单&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	//通知执行</span><br><span class="line">	void Notify()</span><br><span class="line">	&#123;</span><br><span class="line">		vector&lt;Command*&gt;::iterator p=m_commandList.begin();</span><br><span class="line">		while(p!=m_commandList.end())</span><br><span class="line">		&#123;</span><br><span class="line">			(*p)-&gt;ExecuteCmd();</span><br><span class="line">			p++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//客户端</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	//店里添加烤肉师傅、菜单、服务员等顾客</span><br><span class="line">	Barbucer* barbucer=new Barbucer();</span><br><span class="line">	Command* cmd= new BakeMuttonCmd(barbucer);</span><br><span class="line">	Command* cmd2=new ChickenWingCmd(barbucer);</span><br><span class="line">	Waiter* girl = new Waiter();</span><br><span class="line">    //点菜</span><br><span class="line">	girl-&gt;SetCmd(cmd);</span><br><span class="line">	girl-&gt;SetCmd(cmd2);</span><br><span class="line">    //服务员通知</span><br><span class="line">	girl-&gt;Notify();</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##三.解释器模式<br>通常当一个语言需要解释执行，并且你可以将该语言中的句子表示成为一个抽象的语法树时，可以使用解释器模式。</p>
<p><img src="http://img.blog.csdn.net/20180301115337940?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>####代码举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Context;</span><br><span class="line">class AbstractExpression</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void Interpret(Context* context)=0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Expression : public AbstractExpression</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void Interpret(Context* context)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;终端解释器&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class NonterminalExpression : public AbstractExpression</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void Interpret(Context* context)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;非终端解释器&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Context</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	string input;</span><br><span class="line">	string output;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//客户端</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	Context* context = new Context();</span><br><span class="line">	vector&lt;AbstractExpression*&gt; express;</span><br><span class="line">	express.push_back(new Expression());</span><br><span class="line">	express.push_back(new NonterminalExpression());</span><br><span class="line">	express.push_back(new NonterminalExpression());</span><br><span class="line"></span><br><span class="line">	vector&lt;AbstractExpression*&gt;::iterator p = express.begin();</span><br><span class="line">	while (p!= express.end())</span><br><span class="line">	&#123;</span><br><span class="line">		(*p)-&gt;Interpret(context);</span><br><span class="line">		p++;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##四.迭代器模式<br>提供一种方法顺序访问一个聚敛对象的各个元素，而又不暴露该对象的内部表示。<br>为遍历不同的聚集结构提供如开始，下一个，是否结束，当前一项等统一接口。</p>
<p><img src="http://img.blog.csdn.net/20180301115444309?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>##五.中介者模式<br>用一个中介对象来封装一系列的对象交互，中介者使各对象不需要显示的相互引用，从而降低耦合；而且可以独立地改变它们之间的交互。</p>
<p><img src="http://img.blog.csdn.net/20180301115554698?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>####代码举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Colleague;</span><br><span class="line">//中介者类</span><br><span class="line">class Mediator</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void Send(string message,Colleague* col) = 0;</span><br><span class="line">&#125;;</span><br><span class="line">//抽象同事类</span><br><span class="line">class Colleague</span><br><span class="line">&#123;</span><br><span class="line">protected:</span><br><span class="line">	Mediator* mediator;</span><br><span class="line">public:</span><br><span class="line">	Colleague(Mediator* temp)</span><br><span class="line">	&#123;</span><br><span class="line">		mediator = temp;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">//同事一</span><br><span class="line">class Colleague1 : public Colleague</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	Colleague1(Mediator* media) : Colleague(media)&#123;&#125;</span><br><span class="line"></span><br><span class="line">	void Send(string strMessage)</span><br><span class="line">	&#123;</span><br><span class="line">		mediator-&gt;Send(strMessage,this);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	void Notify(string strMessage)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;同事一获得了消息&quot;&lt;&lt;strMessage&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//同事二</span><br><span class="line">class Colleague2 : public Colleague</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	Colleague2(Mediator* media) : Colleague(media)&#123;&#125;</span><br><span class="line"></span><br><span class="line">	void Send(string strMessage)</span><br><span class="line">	&#123;</span><br><span class="line">		mediator-&gt;Send(strMessage,this);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	void Notify(string strMessage)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;同事二获得了消息&quot;&lt;&lt;strMessage&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//具体中介者类</span><br><span class="line">class ConcreteMediator : public Mediator</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	Colleague1 * col1;</span><br><span class="line">	Colleague2 * col2;</span><br><span class="line">	virtual void Send(string message,Colleague* col)</span><br><span class="line">	&#123;</span><br><span class="line">		if(col == col1)</span><br><span class="line">			col2-&gt;Notify(message);</span><br><span class="line">		else </span><br><span class="line">			col1-&gt;Notify(message);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//客户端：</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	ConcreteMediator * m = new ConcreteMediator();</span><br><span class="line"></span><br><span class="line">	//让同事认识中介</span><br><span class="line">	Colleague1* col1 = new Colleague1(m);</span><br><span class="line">	Colleague2* col2 = new Colleague2(m);</span><br><span class="line"></span><br><span class="line">	//让中介认识具体的同事类</span><br><span class="line">	m-&gt;col1 = col1;</span><br><span class="line">	m-&gt;col2 = col2;</span><br><span class="line"></span><br><span class="line">	col1-&gt;Send(&quot;吃饭了吗？&quot;);</span><br><span class="line">	col2-&gt;Send(&quot;还没吃，你请吗？&quot;);</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##六.备忘录模式<br>在不破坏封装性的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态，这样就可以将以后的对象状态恢复到先前保存的状态。<br>适用于功能比较复杂的，但需要记录或维护属性历史的类；或者需要保存的属性只是众多属性中的一小部分时Originator可以根据保存的Memo还原到前一状态。</p>
<p><img src="http://img.blog.csdn.net/20180301115747495?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>####代码举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Memo;</span><br><span class="line"></span><br><span class="line">//发起人类</span><br><span class="line">class Originator</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	string state;</span><br><span class="line">    Memo* CreateMemo();</span><br><span class="line">	void SetMemo(Memo* memo);</span><br><span class="line">	void Show()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;状态：&quot;&lt;&lt;state&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">//备忘录类</span><br><span class="line">class Memo</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	string state;</span><br><span class="line">	Memo(string strState)</span><br><span class="line">	&#123;</span><br><span class="line">		state= strState;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Memo* Originator::CreateMemo()</span><br><span class="line">&#123;</span><br><span class="line">	return new Memo(state);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Originator::SetMemo(Memo* memo)</span><br><span class="line">&#123;</span><br><span class="line">	state = memo-&gt;state;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//管理者类</span><br><span class="line">class Caretaker</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	Memo* memo;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">客户端：</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	Originator* on=new Originator();</span><br><span class="line">	on-&gt;state = &quot;on&quot;;</span><br><span class="line">	on-&gt;Show();</span><br><span class="line"></span><br><span class="line">	Caretaker* c= new Caretaker();</span><br><span class="line">	c-&gt;memo = on-&gt;CreateMemo();</span><br><span class="line"></span><br><span class="line">	on-&gt;state = &quot;off&quot;;</span><br><span class="line">	on-&gt;Show();</span><br><span class="line"></span><br><span class="line">	on-&gt;SetMemo(c-&gt;memo);</span><br><span class="line">	on-&gt;Show();</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##七.观察者模式<br>定义了一种一对多的关系，让多个观察对象（公司员工）同时监听一个主题对象（秘书），主题对象状态发生变化时，会通知所有的观察者，使它们能够更新自己。</p>
<p><img src="http://img.blog.csdn.net/20180301115747495?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>####代码举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Secretary;</span><br><span class="line">//看股票的同事类（观察对象，观察者）</span><br><span class="line">class StockObserver</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">	string name;</span><br><span class="line">	Secretary* sub;</span><br><span class="line">public:</span><br><span class="line">	StockObserver(string strname,Secretary* strsub)</span><br><span class="line">	&#123;</span><br><span class="line">		name=strname;</span><br><span class="line">		sub=strsub;</span><br><span class="line">	&#125;</span><br><span class="line">	void Update();</span><br><span class="line">&#125;;</span><br><span class="line">//秘书类（主题对象，通知者）</span><br><span class="line">class Secretary</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">	vector&lt;StockObserver&gt; observers;</span><br><span class="line">public:</span><br><span class="line">	string action;</span><br><span class="line">	void Add(StockObserver ob)</span><br><span class="line">	&#123;</span><br><span class="line">		observers.push_back(ob);</span><br><span class="line">	&#125;</span><br><span class="line">	void Notify()</span><br><span class="line">	&#123;</span><br><span class="line">        vector&lt;StockObserver&gt;::iterator p = observers.begin();</span><br><span class="line">		while (p!=observers.end())</span><br><span class="line">		&#123;</span><br><span class="line">			(*p).Update();</span><br><span class="line">			p++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void StockObserver::Update()</span><br><span class="line">&#123;</span><br><span class="line">	cout&lt;&lt;name&lt;&lt;&quot;:&quot;&lt;&lt;sub-&gt;action&lt;&lt;&quot;,不要玩股票了，要开始工作了&quot;&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//客户端</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    Secretary *p=new Secretary();  //创建通知者</span><br><span class="line"></span><br><span class="line">	//观察者</span><br><span class="line">	StockObserver *s1= new StockObserver(&quot;小李&quot;,p);</span><br><span class="line">	StockObserver *s2 = new StockObserver(&quot;小赵&quot;,p);</span><br><span class="line">    //加入通知队列</span><br><span class="line">	p-&gt;Add(*s1);</span><br><span class="line">	p-&gt;Add(*s2);</span><br><span class="line">    //事件</span><br><span class="line">	p-&gt;action=&quot;老板来了&quot;;</span><br><span class="line">	//通知</span><br><span class="line">	p-&gt;Notify();</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##八.状态模式<br>当一个对象的行为取决于它的状态，并且它必须在运行时刻根据状态改变它的行为时，可考虑用到状态模式。</p>
<p><img src="http://img.blog.csdn.net/20180301120044988?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>####代码举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Work;</span><br><span class="line">class ForenoonState;</span><br><span class="line">class NoonState;</span><br><span class="line"></span><br><span class="line">class State</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void WriteProgram(Work* w)=0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Work</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">	State* current;</span><br><span class="line">public:</span><br><span class="line">	double hour;</span><br><span class="line">public:</span><br><span class="line">	Work();</span><br><span class="line">	void SetState(State* temp)</span><br><span class="line">	&#123;</span><br><span class="line">       current =temp;</span><br><span class="line">	&#125;</span><br><span class="line">	void Writeprogram()</span><br><span class="line">	&#123;</span><br><span class="line">		current-&gt;WriteProgram(this);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class NoonState :public State</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void WriteProgram(Work* w)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;execute&quot;&lt;&lt;endl;</span><br><span class="line">		if((w-&gt;hour)&lt;13)</span><br><span class="line">			cout&lt;&lt;&quot;还不错啦&quot;&lt;&lt;endl;</span><br><span class="line">		else</span><br><span class="line">			cout&lt;&lt;&quot;不行了，还是睡觉吧&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class ForenoonState : public State</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void WriteProgram(Work* w)</span><br><span class="line">	&#123;</span><br><span class="line">		if((w-&gt;hour)&lt;12)</span><br><span class="line">			cout&lt;&lt;&quot;现在的精神无敌好&quot;&lt;&lt;endl;</span><br><span class="line">		else</span><br><span class="line">		&#123;</span><br><span class="line">			w-&gt;SetState(new NoonState());</span><br><span class="line">			w-&gt;Writeprogram(); //注意加上这句</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Work::Work()</span><br><span class="line">&#123;</span><br><span class="line">		current = new ForenoonState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">客户端：</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	Work* mywork=new Work();</span><br><span class="line">	mywork-&gt;hour=9;</span><br><span class="line">	mywork-&gt;Writeprogram();</span><br><span class="line">	mywork-&gt;hour = 14;</span><br><span class="line">	mywork-&gt;Writeprogram();</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##九.策略模式<br>定义算法家族，分别封装起来，让它们之间可以互相替换，让算法变化，不会影响到用户<br>适合类中的成员以方法为主，算法经常变动；简化了单元测试（因为每个算法都有自己的类，可以通过自己的接口单独测试。<br>策略模式和简单工厂基本相同，但简单工厂模式只能解决对象创建问题，对于经常变动的算法应使用策略模式。</p>
<p><img src="http://img.blog.csdn.net/20180301120044988?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>####代码举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">//策略基类</span><br><span class="line">class COperation</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	int m_nFirst;</span><br><span class="line">	int m_nSecond;</span><br><span class="line">	virtual double GetResult()</span><br><span class="line">	&#123;</span><br><span class="line">		double dResult=0;</span><br><span class="line">		return dResult;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//策略具体类—加法类</span><br><span class="line">class AddOperation : public COperation</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	AddOperation(int a,int b)</span><br><span class="line">	&#123;</span><br><span class="line">		m_nFirst=a;</span><br><span class="line">		m_nSecond=b;</span><br><span class="line">	&#125;</span><br><span class="line">	virtual double GetResult()</span><br><span class="line">	&#123;</span><br><span class="line">		return m_nFirst+m_nSecond;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Context</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">	COperation* op;</span><br><span class="line">public:</span><br><span class="line">    Context(COperation* temp)</span><br><span class="line">	&#123;</span><br><span class="line">        op=temp;</span><br><span class="line">	&#125;</span><br><span class="line">	double GetResult()</span><br><span class="line">	&#123;</span><br><span class="line">		return op-&gt;GetResult();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//客户端</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	int a,b;</span><br><span class="line">    char c;</span><br><span class="line">	cin&gt;&gt;a&gt;&gt;b;</span><br><span class="line">　　cout&lt;&lt;”请输入运算符：;</span><br><span class="line">    cin&gt;&gt;c;</span><br><span class="line">    switch(c)</span><br><span class="line">&#123;</span><br><span class="line">   case ‘+’:</span><br><span class="line">	    Context *context=new Context(new AddOperation(a,b));</span><br><span class="line">	cout&lt;&lt;context-&gt;GetResult()&lt;&lt;endl;</span><br><span class="line">    break;</span><br><span class="line">   default:</span><br><span class="line">    break;</span><br><span class="line">&#125;</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##十.模板模式<br>把不变的代码部分都转移到父类中，将可变的代码用virtual留到子类重写</p>
<p><img src="http://img.blog.csdn.net/20180301120532244?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>####代码举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class AbstractClass</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	void Show()</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;我是&quot;&lt;&lt;GetName()&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">protected:</span><br><span class="line">	virtual string GetName()=0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Naruto : public AbstractClass</span><br><span class="line">&#123;</span><br><span class="line">protected:</span><br><span class="line">	virtual string GetName()</span><br><span class="line">	&#123;</span><br><span class="line">		return &quot;火影史上最帅的六代目---一鸣惊人naruto&quot;;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class OnePice : public AbstractClass</span><br><span class="line">&#123;</span><br><span class="line">protected:</span><br><span class="line">	virtual string GetName()</span><br><span class="line">	&#123;</span><br><span class="line">		return &quot;我是无恶不做的大海贼---路飞&quot;;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//客户端</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	Naruto* man = new Naruto();</span><br><span class="line">	man-&gt;Show();</span><br><span class="line"></span><br><span class="line">	OnePice* man2 = new OnePice();</span><br><span class="line">	man2-&gt;Show();</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##十一.访问者模式<br>适用于数据结构稳定的系统。它把数据结构和作用于数据结构上的操作分离开，使得操作集合<br>新增加操作很容易，因为增加新操作就相当于增加一个访问者，访问者模式将有关的行为集中到一个访问者对象中</p>
<p><img src="http://img.blog.csdn.net/20180301120631007?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWFnbGV1bml2ZXJzaXR5ZXll/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>####代码举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">class Man;</span><br><span class="line">class Woman;</span><br><span class="line">//行为</span><br><span class="line">class Action</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void GetManConclusion(Man* concreteElementA)=0;</span><br><span class="line">	virtual void GetWomanConclusion(Woman* concreteElementB)=0;</span><br><span class="line">&#125;;</span><br><span class="line">//成功</span><br><span class="line">class Success : public Action</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void GetManConclusion(Man* concreteElementA)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;男人成功时，背后有个伟大的女人&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void GetWomanConclusion(Woman* concreteElementB)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;女人成功时，背后有个没用的男人&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//失败</span><br><span class="line">class Failure : public Action</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void GetManConclusion(Man* concreteElementA)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;男人失败时，背后有个伟大的女人&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">	virtual void GetWomanConclusion(Woman* concreteElementB)</span><br><span class="line">	&#123;</span><br><span class="line">		cout&lt;&lt;&quot;女人失败时，背后有个没用的男人&quot;&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//抽象人类</span><br><span class="line">class Person</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void Accept(Action* visitor)=0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//男人</span><br><span class="line">class Man : public Person</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void Accept(Action* visitor)</span><br><span class="line">	&#123;</span><br><span class="line">		visitor-&gt;GetManConclusion(this);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//女人</span><br><span class="line">class Woman : public Person</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	virtual void Accept(Action* visitor)</span><br><span class="line">	&#123;</span><br><span class="line">		visitor-&gt;GetWomanConclusion(this);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//对象结构类</span><br><span class="line">class ObjectStructure</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">	vector&lt;Person*&gt; m_personList;</span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">	void Add(Person* p)</span><br><span class="line">	&#123;</span><br><span class="line">		m_personList.push_back(p);</span><br><span class="line">	&#125;</span><br><span class="line">	void Display(Action* a)</span><br><span class="line">	&#123;</span><br><span class="line">		vector&lt;Person*&gt;::iterator p = m_personList.begin();</span><br><span class="line">		while (p!=m_personList.end())</span><br><span class="line">		&#123;</span><br><span class="line">			(*p)-&gt;Accept(a);</span><br><span class="line">			p++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//客户端</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	ObjectStructure * os= new ObjectStructure();</span><br><span class="line">	os-&gt;Add(new Man());</span><br><span class="line">	os-&gt;Add(new Woman());</span><br><span class="line"></span><br><span class="line">	Success* success = new Success();</span><br><span class="line">	os-&gt;Display(success);</span><br><span class="line"></span><br><span class="line">	Failure* fl = new Failure();</span><br><span class="line">	os-&gt;Display(fl);</span><br><span class="line">	</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/13/北邮计院13上机真题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CycloneKid">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/myimg/1.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CycloneKid的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/13/北邮计院13上机真题/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-13T14:41:47+08:00">
                2018-04-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#A  日期</p>
<p>###题目及要求</p>
<p>Accept:207        Submit:852<br>Time Limit:1000MS        Memory Limit:65536KB<br>Description<br>请你计算出第X年Y月Z日是第X年的第几天。其中，1月1日是第一天，1月2日是第二天，以此类推。<br>计算时请注意闰年的影响。对于非整百年，年数能整除4是闰年，否则不是闰年；对于整百年，年数能整除400是闰年，否则不是闰年。如1900年和1901年不是闰年，而2000年和2004年是闰年。<br>InputFormat<br>第一行有一个整数T($T\leq100$)，表示一共有T组数据需要你处理。<br>接下来一共有T行，每行是一个如下格式的字符串：X:Y:Z，表示你需要计算第X年Y月Z日是第X年的第几天。其中X是一个大于0，小于2100的整数。保证字符串的格式都是合法的，字符串所表示的日期也都是存在的。<br>OutputFormat<br>对于每组数据，你需要输出一个整数，表示所求得的结果。<br>SampleInput<br>2<br>2013:4:12<br>112:4:12<br>SampleOutput<br>102<br>103</p>
<p>###答案</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#define _CRT_SECURE_NO_WARNINGS</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int data1[13][32] = &#123; 0 &#125;;</span><br><span class="line">int data2[13][32] = &#123; 0 &#125;;</span><br><span class="line">int moth1[13] = &#123; 0,31,28,31,30,31,30,31,31,30,31,30,31 &#125;;</span><br><span class="line">int moth2[13] = &#123; 0,31,29,31,30,31,30,31,31,30,31,30,31 &#125;;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">	int k = 1;</span><br><span class="line">	//非闰年</span><br><span class="line">	for (int j = 1; j&lt;13; j++)</span><br><span class="line">	&#123;</span><br><span class="line">		for (int q = 1; q &lt;= moth1[j]; q++)</span><br><span class="line">		&#123;</span><br><span class="line">			data1[j][q] = k;</span><br><span class="line">			k++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	k = 1;</span><br><span class="line">	//闰年</span><br><span class="line">	for (int j = 1; j&lt;13; j++)</span><br><span class="line">		for (int q = 1; q &lt;= moth2[j]; q++)</span><br><span class="line">		&#123;</span><br><span class="line">			data2[j][q] = k;</span><br><span class="line">			k++;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	int n;</span><br><span class="line">	while (cin &gt;&gt; n != EOF)   //EOP=-1</span><br><span class="line">	&#123;</span><br><span class="line">		for (int i = 0; i&lt;n; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			int a, b, c;</span><br><span class="line">			cin &gt;&gt; a;</span><br><span class="line">			cin &gt;&gt; b;</span><br><span class="line">			cin &gt;&gt; c;</span><br><span class="line">			if (((a % 4 == 0) &amp;&amp; (a % 100 != 0)) || (a % 400 == 0))</span><br><span class="line">			&#123;</span><br><span class="line">				cout &lt;&lt; data2[b][c] &lt;&lt; endl;</span><br><span class="line">			&#125;</span><br><span class="line">			else</span><br><span class="line">			&#123;</span><br><span class="line">				cout &lt;&lt; data1[b][c] &lt;&lt; endl;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	//system(&quot;PAUSE&quot;);</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>#B  统计节点个数</p>
<p>###题目及要求<br>Accept:88        Submit:547<br>Time Limit:1000MS        Memory Limit:65536KB<br>Description<br>给出一棵有向树，一共有<code>N   (1&lt;N≤1000   )</code>个节点，如果一个节点的度（入度+出度）不小于它所有儿子以及它父亲的度(如果存在父亲或儿子)，那么我们称这个节点为p节点，现在你的任务是统计p节点的个数。<br>InputFormat<br>第一行为数据组数<code>T   (1≤T≤100   )</code>。<br>每组数据第一行为N   表示树的节点数。后面为N−1   行，每行两个数<code>x   ,y   (0≤x,y&lt;N   )</code>，代表y   是x   的儿子节点。<br>OutputFormat<br>每组数据输出一行，为一个整数，代表这棵树上p节点的个数。<br>SampleInput<br>2<br>5<br>0 1<br>1 2<br>2 3<br>3 4<br>3<br>0 2<br>0 1<br>SampleOutput<br>3<br>1<br>Hint<br>第一组的p节点为1,2,3；第二组的p节点为0。</p>
<p>###答案<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">struct node</span><br><span class="line">&#123;</span><br><span class="line">       int count;</span><br><span class="line">       int child[1010];</span><br><span class="line">       int father;</span><br><span class="line">&#125;a[1010];</span><br><span class="line">int c[1010]=&#123;0&#125;;</span><br><span class="line">int d[1010]=&#123;-1&#125;;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">   </span><br><span class="line">    //freopen(&quot;in.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">    //freopen(&quot;out.txt&quot;,&quot;w&quot;,stdout);</span><br><span class="line">    int t;</span><br><span class="line">    cin&gt;&gt;t;</span><br><span class="line">    for(int i=0;i&lt;t;i++)</span><br><span class="line">    &#123;</span><br><span class="line">            for(int s=0;s&lt;1010;s++)</span><br><span class="line">            &#123;</span><br><span class="line">                    for(int q=0;q&lt;1010;q++)</span><br><span class="line">                    &#123;</span><br><span class="line">                            a[s].child[q]=0;</span><br><span class="line">                    &#125;</span><br><span class="line">                    c[s]=0;</span><br><span class="line">                    a[s].father=0;</span><br><span class="line">                    a[s].count=0;</span><br><span class="line">                    d[s]=-1;</span><br><span class="line">            &#125;</span><br><span class="line">            int n;</span><br><span class="line">            cin&gt;&gt;n;</span><br><span class="line">            for(int j=0;j&lt;n-1;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                  int x,y;</span><br><span class="line">                  cin&gt;&gt;x&gt;&gt;y;</span><br><span class="line">                  a[x].count++;</span><br><span class="line">                  a[y].count++;</span><br><span class="line">                  a[y].father=x;</span><br><span class="line">                  a[x].child[c[x]]=y; </span><br><span class="line">                  d[y]++; </span><br><span class="line">                  c[x]++;</span><br><span class="line">            &#125;</span><br><span class="line">            int ans=0;</span><br><span class="line">            for(int j=0;j&lt;n;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                   int flag=1; </span><br><span class="line">                   if(d[j]==-1)</span><br><span class="line">                    &#123;</span><br><span class="line">                         </span><br><span class="line">                         for(int k=0;k&lt;c[j];k++)</span><br><span class="line">                         &#123;</span><br><span class="line">                                 if(a[j].count&lt;a[a[j].child[k]].count)</span><br><span class="line">                                 &#123;</span><br><span class="line">                                      flag=0;</span><br><span class="line">                                      break;</span><br><span class="line">                                 &#125;</span><br><span class="line">                         &#125;   </span><br><span class="line">                    &#125;</span><br><span class="line">                    else if(c[j]!=0)</span><br><span class="line">                    &#123;</span><br><span class="line">                        for(int k=0;k&lt;c[j];k++)</span><br><span class="line">                         &#123;</span><br><span class="line">                                 if(a[j].count&lt;a[a[j].child[k]].count)</span><br><span class="line">                                 &#123;</span><br><span class="line">                                      flag=0;</span><br><span class="line">                                      break;</span><br><span class="line">                                 &#125;</span><br><span class="line">                         &#125; </span><br><span class="line">                         if(a[j].count&lt;a[a[j].father].count) </span><br><span class="line">                          &#123;   flag=0;&#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                    else if(a[j].count&lt;a[a[j].father].count)</span><br><span class="line">                        &#123;flag=0;&#125;</span><br><span class="line">                    if(flag==1)</span><br><span class="line">                      ans++;</span><br><span class="line">            &#125;</span><br><span class="line">            cout&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>#C  中序遍历序列</p>
<p>###题目及要求<br>Accept:155     Submit:502<br>Time Limit:1000MS     Memory Limit:65536KB </p>
<p>Description</p>
<p>给出一个序列，判断该序列是不是某二叉搜索树的中序遍历序列，如果是输出”Yes”，否则输出”No”。</p>
<p>一颗带权二叉树是一颗二叉搜索树（二叉排序树），当且仅当对于任意一个节点，他的左子树中的所有权值小于当前节点的权值，且它的右子树中的所有权值均大于当前节点的权值。</p>
<p>Input Format</p>
<p>第一行T (T/leq10 )代表数据组数。</p>
<p>每组数据包括两行：</p>
<p>第一行为一个整数N ($1/leq x /leq 400),表示序列的长度。</p>
<p>第二行包含N 个整数，表示这个这个序列，序列中的数的x 范围为($1/leq x/leq 100000)。</p>
<p>OutPut Format</p>
<p>每组数据，如果是二叉搜索树的中序遍历序列输出”Yes”,否则输出”No”。</p>
<p>Input<br>2<br>4<br>1 2 3 4<br>4<br>1 3 2 4</p>
<p>OutPut<br>Yes<br>No</p>
<p>###答案<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int a[402]=&#123;0&#125;;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    int s;</span><br><span class="line">    cin&gt;&gt;s;</span><br><span class="line">    for(int k=0;k&lt;s;k++)</span><br><span class="line">    &#123;</span><br><span class="line">    int flag=0;</span><br><span class="line">    int n;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    for(int i=0;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">           cin&gt;&gt;a[i]; </span><br><span class="line">    &#125;</span><br><span class="line">    for(int i=0;i&lt;n-1;i++)</span><br><span class="line">    &#123;</span><br><span class="line">            if(a[i]&gt;a[i+1])</span><br><span class="line">             &#123;   flag=1;break;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if(flag==0)</span><br><span class="line">       cout&lt;&lt;&quot;Yes&quot;&lt;&lt;endl;</span><br><span class="line">    else</span><br><span class="line">       cout&lt;&lt;&quot;No&quot;&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>#D  最小距离查询</p>
<p>###题目及要求<br>Accept:2     Submit:433<br>Time Limit:1000MS     Memory Limit:65536KB </p>
<p>Description</p>
<p>给定一个由小写字母a到z组成的字符串S，其中第i个字符为S[i]（下标从0开始）。你需要完成下面两个操作：</p>
<p>INSERT c</p>
<p>其中c是一个待输入的字符。你需要在字符串的末尾添加这个字符。保证输入的字符同样是a到z之间的一个小写字母。</p>
<p>QUERY x</p>
<p>其中x是一个输入的整数下标。对于这个询问，你需要回答在S当中和S[x]相等且与x最近的距离。输入保证x在当前字符串中合法。</p>
<p>例如S = “abcaba”，如果我们操作：<br>INSERT a    </p>
<p>则在S的末端加一个字符a，S变成”abcabaa”。</p>
<p>接下来操作<br>QUERY 0</p>
<p>由于S[0] = a，在S中出现的离他最近的a在下标为3的位置上，距离为3 - 0 = 3。因此应当输出3。</p>
<p>接下来，如果<br>QUERY 4</p>
<p>S[4] = b，S中离它最近的b出现在下标为1处，距离为4 - 1 = 3。同样应当输出3。</p>
<p>给定初始字符串S和若干操作，对于每个QUERY，你需要求出相应的距离。</p>
<p>InputFormat</p>
<p>输入的第一*行是一个正整数T (T≤20 )，表示测试数据的组数。</p>
<p>每组输入数据的第一行是一个初始串S。第二行是一个正整数m (1≤m≤100000 )，表示总共操作的数量。接下来m行，每行表示一个操作。操作的格式如上所述。</p>
<p>数据保证在任何情况下，S的长度不会超过100000。</p>
<p>OutputFormat</p>
<p>对于每个QUERY，输出所求的最小距离。如果S中其它位置都不存在和它相同的字符，输出-1。</p>
<p>SampleInput<br>2<br>axb<br>3<br>INSERT a<br>QUERY 0<br>QUERY 1<br>explore<br>3<br>INSERT r<br>QUERY 7<br>QUERY 1</p>
<p>SampleOutput<br>3<br>-1<br>2<br>-1</p>
<p>Hint</p>
<p>由于输入数据较大，C/C++中推荐使用scanf进行读入以获得更快的读入速度。同时请注意算法复杂度。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/13/CentOS7.3系统Tomcat无法正常启动解决（8005端口不能启动）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CycloneKid">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/myimg/1.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CycloneKid的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/13/CentOS7.3系统Tomcat无法正常启动解决（8005端口不能启动）/" itemprop="url">Linux系统Tomcat无法正常启动</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-13T10:32:17+08:00">
                2018-04-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/随笔/" itemprop="url" rel="index">
                    <span itemprop="name">随笔</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      
        <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
          
          
            <div class="post-gallery-row">
              <a class="post-gallery-img fancybox"
                 href="/myimg/1.gif" rel="gallery_cjfxlbw3c0000bovg2m4aj7g4"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="/myimg/1.gif" itemprop="contentUrl"/>
              </a>
            
          

          
          </div>
        </div>
      

      
        
          <p>排查Tomcat错误<br>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2018/04/13/CentOS7.3系统Tomcat无法正常启动解决（8005端口不能启动）/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/13/JQuery的一些简单使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CycloneKid">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/myimg/1.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CycloneKid的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/13/JQuery的一些简单使用/" itemprop="url">JQuery的一些简单使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-13T10:32:17+08:00">
                2018-04-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/随笔/" itemprop="url" rel="index">
                    <span itemprop="name">随笔</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      
        <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
          
          
            <div class="post-gallery-row">
              <a class="post-gallery-img fancybox"
                 href="/myimg/2.gif" rel="gallery_cjfxlbw3c0001bovglw5ud4te"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="/myimg/2.gif" itemprop="contentUrl"/>
              </a>
            
          

          
          </div>
        </div>
      

      
        
          <p>JQuery的一些简单使用<br>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2018/04/13/JQuery的一些简单使用/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/13/Nginx入门/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CycloneKid">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/myimg/1.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CycloneKid的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/13/Nginx入门/" itemprop="url">Nginx入门</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-13T10:32:17+08:00">
                2018-04-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/随笔/" itemprop="url" rel="index">
                    <span itemprop="name">随笔</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      
        <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
          
          
            <div class="post-gallery-row">
              <a class="post-gallery-img fancybox"
                 href="/myimg/3.gif" rel="gallery_cjfxlbw3c0004bovgnxmcgm9y"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="/myimg/3.gif" itemprop="contentUrl"/>
              </a>
            
          

          
          </div>
        </div>
      

      
        
          <p>Nginx入门<br>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2018/04/13/Nginx入门/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/myimg/1.gif"
                alt="CycloneKid" />
            
              <p class="site-author-name" itemprop="name">CycloneKid</p>
              <p class="site-description motion-element" itemprop="description">一位在校大学生的学习笔记</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/JavaStudenttwo" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:sk18810356@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.zhihu.com/people/kuang-da-zhi-yin/activities" target="_blank" title="ZhiHu">
                      
                        <i class="fa fa-fw fa-youtube"></i>ZhiHu</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://blog.csdn.net/eagleuniversityeye" target="_blank" title="CSDN">
                      
                        <i class="fa fa-fw fa-skype"></i>CSDN</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://blog.csdn.net/kinglearnjava" title="我的CSDN博客" target="_blank">我的CSDN博客</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://blog.sina.com.cn/u/1069913250" title="我的新浪博客" target="_blank">我的新浪博客</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">CycloneKid</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
